// Copyright 2013 St√©phane Lavergne <http://www.imars.com/> Free software under <http://www.gnu.org/licenses/lgpl-3.0.txt>
"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"object"!=typeof JSON&&(window.JSON={stringify:function(){return"{}"},parse:function(){return null}}),function(window){var t=function(t){var e=0,n=null;if(this.a=[],!t)return this;if(t.length){if(t.item){for(e=0;t.length>e;e++)n=t.item(e),$.isNode(n)&&this.a.push(n);return this}if(t.length>0){for(e=0;t.length>e;e++)$.isNode(t[e])&&this.a.push(t[e]);return this}}return $.isNode(t)&&this.a.push(t),this};t.prototype.length=function(){return this.a.length},t.prototype.each=function(t){var e=0;for(e=0;this.a.length>e;e++)t.apply(this.a[e]);return this},t.prototype.first=function(){return this.a.length>0?new t(this.a[0]):new t},t.prototype.last=function(){return this.a.length>0?new t(this.a[this.a.length-1]):new t},t.prototype.find=function(e){if(!e)return this;e=e.trim();var n,r=[],s=0,i=0,o=[],a=e.charAt(0),h=e.substr(1),l=0>h.search($.u.SS),p=l&&"#"===a,u=l&&"."===a,d=l&&!p&&!u;for(s=0;this.a.length>s;s++)if(p?o.push(this.a[s].getElementById(h)):u&&document.getElementsByClassName?o=this.a[s].getElementsByClassName(h):d?o=this.a[s].getElementsByTagName(e):document.querySelectorAll&&(o=this.a[s].querySelectorAll(e)),o.length&&o.length>0)for(i=0;o.length>i;i++)n=o.item?o.item(i):o[i],$.isNode(n)&&r.push(n);return new t(r)},t.prototype._ready=function(){var t,e=0;for(e=0;window.$.r.length>e;e++)t=window.$.r.pop(),t()},t.prototype.ready=function(t){return window.$.r.push(t),"complete"===document.readyState?this._ready():document.addEventListener?document.addEventListener("DOMContentLoaded",this._ready,!1):window.addEventListener?window.addEventListener("load",this._ready,!1):document.attachEvent?document.attachEvent("onreadystatechange",this._ready):window.attachEvent&&window.attachEvent("onload",this._ready),this},t.prototype.attr=function(t,e){var n=0;if(e===void 0)return this.a.length>0?this.a[0].getAttribute(t):null;for(n=0;this.a.length>n;n++)this.a[n].setAttribute(t,e);return this},t.prototype.parent=function(){return this.a.length>0?new t(this.a[0].parentNode):new t},t.prototype.children=function(){var e,n=[],r=0,s=0;for(r=0;this.a.length>r;r++)if(e=this.a[r].childNodes,e.length&&e.length>0&&e.item)for(s=0;e.length>s;s++)$.isNode(e[s])&&n.push(e[s]);return new t(n)},t.prototype.prev=function(){var e,n=[],r=0;for(r=0;this.a.length>r;r++)e=this.a[r].previousSibling,$.isNode(e)&&n.push(e);return new t(n)},t.prototype.next=function(){var e,n=[],r=0;for(r=0;this.a.length>r;r++)e=this.a[r].nextSibling,$.isNode(e)&&n.push(e);return new t(n)},t.prototype.remove=function(){var t=0;for(t=0;this.a.length>t;t++)this.a[t].parentNode&&this.a[t].parentNode.removeChild(this.a[t]);return null},t.prototype.empty=function(){var t,e=0;for(e=0;this.a.length>e;e++)for(t=this.a[e];t.firstChild;)t.removeChild(t.firstChild);return this},t.prototype.html=function(t){var e,n,r=0;if(!t)return this.a.length>0?this.a[0].innerHTML:"";for(e=document.createDocumentFragment(),n=document.createElement("div"),n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);for(this.empty(),r=0;this.a.length>r;r++)this.a[r].innerHTML=t;return this},t.prototype.text=function(t){var e,n=0;if(!t){if(this.a.length>0){for(t="",n=0;this.a.length>n;n++)e=this.a[n].nodeType,t+=3===e||4===e?this.a[n].nodeValue:this.a[n].innerText;return t}return""}for(this.empty(),n=0;this.a.length>n;n++)this.a[n].appendChild(document.createTextNode(t));return this},t.prototype.append=function(t){var e=0,n=document.createDocumentFragment(),r=document.createElement("div");for(r.innerHTML=t;r.firstChild;)n.appendChild(r.firstChild);for(e=0;this.a.length>e;e++)this.a[e].appendChild(n.cloneNode(!0));return this},t.prototype.prepend=function(t){var e=0,n=document.createDocumentFragment(),r=document.createElement("div");for(r.innerHTML=t;r.firstChild;)n.appendChild(r.firstChild);for(e=0;this.a.length>e;e++)this.a[e].insertBefore(n.cloneNode(!0),this.a[e].firstChild);return this},"undefined"==typeof document||document.createElement("a").hasOwnProperty("classList")?(t.prototype.addClass=function(t){var e,n=0;return this.each(function(){for(e=this.className.trim().split($.u.sp),n=0;e.length>n;n++)if(e[n]===t)return;this.className=this.className+" "+t}),this},t.prototype.removeClass=function(t){return this.each(function(){var e=0,n=!1,r=this.className.trim().split($.u.sp);for(e=0;r.length>e;e++)r[e]===t&&(r.splice(e,1),n=!0);n&&(this.className=r.join(" "))}),this},t.prototype.toggleClass=function(t){return this.each(function(){var e=0,n=!1,r=this.className.trim().split($.u.sp);for(e=0;r.length>e;e++)r[e]===t&&(r.splice(e,1),n=!0);this.className=r.join(" ")+(n?"":" "+t)}),this},t.prototype.hasClass=function(t){var e,n=0,r=0;for(n=0;this.a.length>n;n++)for(e=this.className.trim().split($.u.sp),r=0;e.length>r;r++)if(e[r]===t)return!0;return!1}):(t.prototype.addClass=function(t){var e=0;for(e=0;this.a.length>e;e++)this.a[e].classList.add(t);return this},t.prototype.removeClass=function(t){var e=0;for(e=0;this.a.length>e;e++)this.a[e].classList.remove(t);return this},t.prototype.toggleClass=function(t){var e=0;for(e=0;this.a.length>e;e++)this.a[e].classList.toggle(t);return this},t.prototype.hasClass=function(t){var e=0;for(e=0;this.a.length>e;e++)if(this.a[e].classList.contains(t))return!0;return!1}),t.prototype.css=function(t,e){var n=0,r=t.toLowerCase().replace($.u.msCC,"ms-").replace($.u.cssCC,$.u.fCC);if(e===void 0)return this.a.length>0?this.a[0].style[r]:null;for(n=0;this.a.length>n;n++)this.a[n].style[r]=e;return this},t.prototype.show=function(){return this.each(function(){var t=this.style;"none"===t.display&&(t.display=t._oldDisplay||"")}),this},t.prototype.hide=function(){return this.each(function(){var t=this.style;"none"!==t.display&&(t._oldDisplay=t.display,t.display="none")}),this},t.prototype.toggle=function(){return this.each(function(){var t=this.style;"none"===t.display?t.display=t._oldDisplay||"":(t._oldDisplay=t.display,t.display="none")}),this},t.prototype.on=function(t,e,n){var r=0,s=function(t){var r=t||window.event,s=r.srcElement||r.target;e&&""!==e&&"*"!==e?$.sel(s,e)&&(n.apply(s,[r])||r.preventDefault()):n.apply(s,[r])||r.preventDefault()};if("function"==typeof e&&(n=e,e=!1),document.addEventListener)for(r=0;this.a.length>r;r++)this.a[r].addEventListener(t,s,!1);else if(document.attachEvent)for(r=0;this.a.length>r;r++)this.a[r].attachEvent("on"+t,s);return this},window.$=function(e,n){if(n||(n=document),$.isNode(e))return new t(e);var r=new t(n);return r.find(e)},window.$.u={sp:/\s+/,sm:/^([a-zA-Z0-9_\-]*)((#|\.)([a-zA-Z0-9_\-]+))?$/,SS:/\s|[<#.\[]/,msCC:/^-ms-/,cssCC:/-([0-9a-z])/gi,fCC:function(t,e){return e.toUpperCase()}},window.$.r=[],window.$.isNode=function(t){return t&&t.nodeType&&(1===t.nodeType||9===t.nodeType||11===t.nodeType)},window.$.sel=function(t,e){for(var n,r,s,i=e.trim().split($.u.sp).reverse(),o=null;i.length>0&&t&&1===t.nodeType;)if(o||(o=i[0].match($.u.sm)),o[1]&&""!==o[1]&&t.nodeName.toUpperCase()!==o[1].toUpperCase())t=t.parentNode;else{if(o[4])if("#"===o[3]){if(t.id!==o[4]){t=t.parentNode;continue}}else if(t.hasOwnProperty("classList")){if(!t.classList.contains(o[4])){t=t.parentNode;continue}}else{for(n=t.className?t.className.trim().split($.u.sp):[],r=!1,s=0;n.length>s;s++)if(n[s]===o[4]){r=!0;break}if(!r){t=t.parentNode;continue}}t=t.parentNode,i.shift(),o=null}return 0===i.length},window.$.ajax=function(t){if("function"!=typeof t.error&&(t.error=null),"function"!=typeof t.success&&(t.success=null),"string"==typeof t.type&&(t.type=t.type.toUpperCase()),"POST"!==t.type&&(t.type="GET"),!t.url)return t.error&&t.error(null,"error","No URL specified."),null;if("text"!==t.dataType&&"xml"!==t.dataType&&"json"!==t.dataType&&(t.dataType="html"),"string"!=typeof t.contentType&&(t.contentType="application/x-www-form-urlencoded; charset=UTF-8"),"string"!=typeof t.username&&(t.username=null),"string"!=typeof t.password&&(t.password=null),!window.XMLHttpRequest)return t.error&&t.error(null,"error","This browser doesn't provide XMLHttpRequest."),null;var e,n=!1,r=new XMLHttpRequest;if(r.open(t.type,t.url,!0,t.username,t.password),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type",t.contentType),t.headers)for(e in t.headers)t.headers.hasOwnProperty(e)&&r.setRequestHeader(e,t.headers[e]);return"string"==typeof t.data?r.send(t.data):r.send(null),r.onreadystatechange=function(){var e=null,s="";if(4===r.readyState&&n===!1){n=!0;try{s=r.statusText}catch(i){s=""}r.status>=200&&300>r.status?t.success&&(e="xml"===t.dataType||"html"===t.dataType?r.responseXML:"json"===t.dataType?JSON.parse(r.responseText):r.responseText,t.success(e,s,r)):t.error&&t.error(r,"error",s)}return!0},null},window.$.node=function(t){return document.createElement(t)}}(window);